<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Programando Dapps en Solana - Alejandro Sánchez Yalí</title><meta name="Description" content="Una blockchain es una libro de registros de bloques de información que son almacenados secuencialmente y enlazados por métodos criptográficos a través de una red de computadores. Es más que un simple algoritmo, blockchain es una tecnología que facilita la intermediación descentralizada de datos entre los participantes"><meta property="og:title" content="Programando Dapps en Solana" />
<meta property="og:description" content="Una blockchain es una libro de registros de bloques de información que son almacenados secuencialmente y enlazados por métodos criptográficos a través de una red de computadores. Es más que un simple algoritmo, blockchain es una tecnología que facilita la intermediación descentralizada de datos entre los participantes" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://alejandrosanchezyali.vercel.app/20220310solana/" /><meta property="og:image" content="https://alejandrosanchezyali.vercel.app/20220310solana/featured-image.webp"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-10T08:19:27-05:00" />
<meta property="article:modified_time" content="2022-07-02T21:13:52-05:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://alejandrosanchezyali.vercel.app/20220310solana/featured-image.webp"/>
<meta name="twitter:title" content="Programando Dapps en Solana"/>
<meta name="twitter:description" content="Una blockchain es una libro de registros de bloques de información que son almacenados secuencialmente y enlazados por métodos criptográficos a través de una red de computadores. Es más que un simple algoritmo, blockchain es una tecnología que facilita la intermediación descentralizada de datos entre los participantes"/>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-V8Q3782W9K"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-V8Q3782W9K', { 'anonymize_ip': false });
}
</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-V8Q3782W9K', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



<meta name="application-name" content="Alejandro Sánchez Yalí">
<meta name="apple-mobile-web-app-title" content="Alejandro Sánchez Yalí"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };

  window.addEventListener('load', (event) => {
      document.querySelectorAll("mjx-container").forEach(function(x){
        x.parentElement.classList += 'has-jax'})
    });

</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-7C1T5T1CHM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7C1T5T1CHM');
</script>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://alejandrosanchezyali.vercel.app/20220310solana/" /><link rel="prev" href="https://alejandrosanchezyali.vercel.app/20210712machinelearning/" /><link rel="next" href="https://alejandrosanchezyali.vercel.app/20220323solananftandipfs/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Programando Dapps en Solana",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/alejandrosanchezyali.vercel.app\/20220310solana\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/alejandrosanchezyali.vercel.app\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "Sistemas distribuidos","wordcount":  5536 ,
        "url": "https:\/\/alejandrosanchezyali.vercel.app\/20220310solana\/","datePublished": "2022-03-10T08:19:27-05:00","dateModified": "2022-07-02T21:13:52-05:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Alejandro Sánchez Yalí","logo": "https:\/\/alejandrosanchezyali.vercel.app\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Alejandro Sánchez Yalí"
            },"description": "Una blockchain es una libro de registros de bloques de información que son almacenados secuencialmente y enlazados por métodos criptográficos a través de una red de computadores. Es más que un simple algoritmo, blockchain es una tecnología que facilita la intermediación descentralizada de datos entre los participantes"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Alejandro Sánchez Yalí">Alejandro Sánchez Yalí</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Artículos </a><a class="menu-item" href="/about/"> Bio </a><a class="menu-item" href="https://github.com/asanchezyali" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/20220310solana/" selected>Español</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Buscar" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Buscar">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Limpiar">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Alejandro Sánchez Yalí">Alejandro Sánchez Yalí</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Buscar" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Buscar">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Limpiar">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancelar
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Artículos</a><a class="menu-item" href="/about/" title="">Bio</a><a class="menu-item" href="https://github.com/asanchezyali" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/20220310solana/" selected>Español</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Programando Dapps en Solana</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Alejandro Sánchez Yalí</a></span>&nbsp;<span class="post-category">incluido en <a href="/categories/blockchain/"><i class="far fa-folder fa-fw"></i>Blockchain</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-03-10">2022-03-10</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;5536 palabras&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;26 minutos&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/20220310solana/featured-image.webp"
        data-srcset="/20220310solana/featured-image.webp, /20220310solana/featured-image.webp 1.5x, /20220310solana/featured-image.webp 2x"
        data-sizes="auto"
        alt="/20220310solana/featured-image.webp"
        title="Una blockchain es una libro de registros de bloques de información que son almacenados secuencialmente y enlazados por métodos criptográficos a través de una red de computadores. Es más que un simple algoritmo, blockchain es una tecnología que facilita la intermediación descentralizada de datos entre los participantes" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#solana-cli">Solana CLI</a>
      <ul>
        <li><a href="#criptocartera-de-papel-y-airdrop">Criptocartera de papel y airdrop</a></li>
        <li><a href="#gestionando-las-redes-de-solana">Gestionando las redes de solana</a></li>
      </ul>
    </li>
    <li><a href="#configuración-inicial-de-una-dapp-con-anchor">Configuración inicial de una dapp con Anchor</a></li>
    <li><a href="#hello-world">Hello World</a></li>
    <li><a href="#construyento-la-react-app">Construyento la React App</a></li>
    <li><a href="#configurar-la-red-local-en-la-wallet">Configurar la red local en la Wallet</a></li>
    <li><a href="#despliegue-en-la-devnet">Despliegue en la Devnet</a></li>
    <li><a href="#el-siguiente-paso-para-no-parar-de-aprender">El siguiente paso para no parar de aprender</a></li>
    <li><a href="#asesorías">Asesorías</a></li>
    <li><a href="#patrocinio">Patrocinio</a></li>
    <li><a href="#imágenes">Imágenes</a></li>
    <li><a href="#referencias">Referencias</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Aquí vas a encontrar cómo construir el código base para una <em>dapp</em> en la cadena de bloques de Solana. Para ello, necesitarás:</p>
<ol>
<li>
<p><a href="https://docs.solana.com/cli/install-solana-cli-tools" target="_blank" rel="noopener noreffer">Solana Tool Suite (1.8.16)</a> - Esta es la CLI de Solana. La documentación es muy completa y allí encontrarás todos los detalles para aprender a utilizarla.</p>
</li>
<li>
<p><a href="https://project-serum.github.io/anchor/getting-started/introduction.html" target="_blank" rel="noopener noreffer">Anchor (0.21.0)</a> - Seguramente si has desarrollado dapps sobre Ethereum, habrás utilizado <a href="https://hardhat.org/" target="_blank" rel="noopener noreffer">Hardhat</a>. Bueno, Anchor es un <em>framework</em> parecido a Hardhat que se utiliza para desarrollar <em>dapps</em> sobre Solana.</p>
</li>
<li>
<p><a href="https://solana-labs.github.io/solana-web3.js/" target="_blank" rel="noopener noreffer">solana/web3.js (1.36.0)</a> - Es una version de <a href="https://web3js.readthedocs.io/" target="_blank" rel="noopener noreffer">web3.js</a> para solana, sin embargo la documentación no es muy buena, así que si tienes dificultades con ella busca apoyo en las comunidades de discord.</p>
</li>
<li>
<p><a href="https://reactjs.org/" target="_blank" rel="noopener noreffer">React.js (17.0.2)</a> - <em>Framework</em> para el desarrollo de Front-end. Bastante popular y con muy buena documentación.</p>
</li>
<li>
<p><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreffer">Node.js (16.04)</a> - Para instalarla puedes usar <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreffer">nvm</a>.</p>
</li>
<li>
<p><a href="https://project-serum.github.io/anchor/getting-started/installation.html" target="_blank" rel="noopener noreffer">Phantom</a> - Es la criptocartera que emplearemos para guardar las criptomonedas de Solana.</p>
</li>
</ol>
<p>Como has visto en cada uno de los items encontrarás enlazada cada herramienta con la documentación para instalarlas, ya que cada proyecto explica como hacerlo y además mantienen actualizados los procedimientos.</p>
<p>También te recomendamos que te unas a las comunidades de discord de Anchor, Stractors, Metaplex y Solana para que te ayuden a mantenerte actualizado:</p>
<ol>
<li><a href="https://discord.gg/ZCHmqvXgDw" target="_blank" rel="noopener noreffer">Anchor</a></li>
<li><a href="https://discord.gg/ebsJrabneZ" target="_blank" rel="noopener noreffer">Stractors</a></li>
<li><a href="https://discord.gg/rpn5wM8Ry3" target="_blank" rel="noopener noreffer">Metaplex</a></li>
<li><a href="https://discord.gg/solana" target="_blank" rel="noopener noreffer">Solana Tech</a></li>
</ol>
<p>Y si quieres aprender más sobre la blockchain conmigo, puedes visitar mi canal de discord <a href="https://discord.gg/eeZgZaWNRu" target="_blank" rel="noopener noreffer">CODE &amp; MATH</a>.</p>
<p>Espero que el contenido que voy a presentar a continuación sea de su agrado y les permita incrementar su <em>Qi</em> como desarrolladores de <em>Blockchain</em>.</p>
<h2 id="solana-cli">Solana CLI</h2>
<p>El CLI de Solana es una herramienta que te permite interactuar con la blockchain de Solana. Para ello, necesitas instalarlo de acuerdo a las instrucciones que te proporciona la documentación: <a href="https://docs.solana.com/cli/install-solana-cli-tools" target="_blank" rel="noopener noreffer">Solana Tool Suite (1.8.16)</a>. Por otro lado, debes configurarlo para que puedas interactuar con la blockchain. Existen tres redes de configurar el ambiente de trabajo: <code>localhost</code>, <code>testnet</code>, <code>devnet</code> o <code>mainnet-beta</code>.</p>
<p>Además, debes obtener algunas criptomonedas de prueba para realizar pruebas. Las criptomonedas que te proporcionará el CLI para las redes <code>localhost</code>, <code>testnet</code> y <code>devnet</code> no tiene ningún valor comercial, son solo para probar las dapps en ambientes de desarrollo.</p>
<h3 id="criptocartera-de-papel-y-airdrop">Criptocartera de papel y airdrop</h3>
<p>Una criptocartera de criptomonedas es una herramienta que te permite almacenar claves privadas que son utilizadas para generar claves públicas que son utilizadas para generar transacciones. A continuación te enseñaremos como generar una <a href="https://docs.solana.com/wallet-guide/paper-wallet" target="_blank" rel="noopener noreffer">criptocartera de papel</a> usando la línea de comandos de Solana. Para ello, utilizaremos el comando  <code>solana-keygen</code>, que se debería haber sido instalado cuando instalamos el CLI de solana. Sin embargo, para verificar que se instaló correctamente, podemos ejecutar el siguiente comando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana --version
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl">solana-cli 1.8.16 <span class="o">(</span>src:23af37fe<span class="p">;</span> feat:1886190546<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Si vemos la versión, es que se instaló correctamente. Significa que podemos ejecutar el comando <code>solana-keygen</code> para generar una criptocartera de papel.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana-keygen new --outfile ~/.config/solana/«MY_PAPER_WALLET».json
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl">Generating a new keypair
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">For added security, enter a BIP39 passphrase
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NOTE! This passphrase improves security of the recovery seed phrase NOT the
</span></span><span class="line"><span class="cl">keypair file itself, which is stored as insecure plain text
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">BIP39 Passphrase <span class="o">(</span>empty <span class="k">for</span> none<span class="o">)</span>: 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Wrote new keypair to /home/alejandro/.config/solana/«MY_PAPER_WALLET».json
</span></span><span class="line"><span class="cl"><span class="o">==============================================================================</span>
</span></span><span class="line"><span class="cl">pubkey: <span class="nv">A9exxqnew6bbovMLt8ZDA2CyUVEKP6Y2uGkT8EGE2q7J</span>
</span></span><span class="line"><span class="cl"><span class="o">==============================================================================</span>
</span></span><span class="line"><span class="cl">Save this seed phrase and your BIP39 passphrase to recover your new keypair:
</span></span><span class="line"><span class="cl">surface pride wild second judge where episode wire enforce trial upgrade music
</span></span></code></pre></td></tr></table>
</div>
</div><p>El parámetro <code>MY_PAPER_WALLET</code> es un nombre que le daremos a la criptocartera de papel que generaremos. Por ejemplo, si queremos generar una criptocartera de papel para guardarla en la carpeta <code>~/.config/solana/</code>, podemos usar <code>MY_PAPER_WALLET=my_paper_wallet</code>. Cuando ejecutemos el comando <code>solana-keygen new</code>, el CLI nos pedirá que introduzcamos una frase de recuperación para generar la clave pública y la clave privada. Siéntase libre de añadir una frase de contraseña si lo desea, está bien no hacerlo para los propósitos de este tutorial.</p>
<p>Una vez que hemos rellenado el formulario, el terminal debería mostrar la clave pública y la frase semilla generada. Copie y guarde la frase semilla en un lugar seguro.</p>
<p>El par de claves se generará en la siguiente ubicación:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/home/&lt;your user&gt;/.config/solana/«MY_PAPER_WALLET».json
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Nota<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">El archivo json puede llamarse como usted quiera, asegúrese de almacenar su frase semilla en algún lugar seguro.</div>
        </div>
    </div>
<p>Para usar tu nueva criptocartera, entonces escribimos el siguiente comando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana config <span class="nb">set</span> --keypair ~/.config/solana/«MY_PAPER_WALLET».json
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl">Config File: /home/alejandro/.config/solana/cli/config.yml
</span></span><span class="line"><span class="cl">RPC URL: https://api.devnet.solana.com 
</span></span><span class="line"><span class="cl">WebSocket URL: wss://api.devnet.solana.com/ <span class="o">(</span>computed<span class="o">)</span>
</span></span><span class="line"><span class="cl">Keypair Path: /home/alejandro/.config/solana/«MY_PAPER_WALLET».json 
</span></span><span class="line"><span class="cl">Commitment: confirmed 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ahora vamos a probar que la criptocartera de papel se ha creado correctamente. Para ello, debemos asegurarnos primero de usar la red de pruebas <code>devnet</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana config <span class="nb">set</span> --url devnet
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl">Config File: /home/alejandro/.config/solana/cli/config.yml
</span></span><span class="line"><span class="cl">RPC URL: https://api.devnet.solana.com 
</span></span><span class="line"><span class="cl">WebSocket URL: wss://api.devnet.solana.com/ <span class="o">(</span>computed<span class="o">)</span>
</span></span><span class="line"><span class="cl">Keypair Path: /home/alejandro/.config/solana/«MY_PAPER_WALLET».json 
</span></span><span class="line"><span class="cl">Commitment: confirmed 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Para comprobar la configuración actual de la red (y otras) podemos emplear este comando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana config get
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl">Config File: /home/user/.config/solana/cli/config.yml
</span></span><span class="line"><span class="cl">RPC URL: https://api.devnet.solana.com 
</span></span><span class="line"><span class="cl">WebSocket URL: wss://api.devnet.solana.com/ <span class="o">(</span>computed<span class="o">)</span>
</span></span><span class="line"><span class="cl">Keypair Path: /home/user/.config/solana/«MY_PAPER_WALLET».json 
</span></span><span class="line"><span class="cl">Commitment: confirmed 
</span></span></code></pre></td></tr></table>
</div>
</div><p>con el CLI podemos ver la dirección de nuestra criptocartera:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana address
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">4aDSG82CdgMwt81z7AwnLnDRZyp6MjvZMUVpT82HZRU9
</span></span></code></pre></td></tr></table>
</div>
</div><p>A continuación vamos a conseguir algo de criptomonedas de prueba de Solana, para hacer esto, debemos asegurarnos que estamos usando la <code>devnet</code>, ya que nuestro código base va a funcionar en esta red. Para conseguir las criptomonedas de prueba, ejecutamos el siguiente comando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana airdrop <span class="m">2</span> «YOUR_ADDRESS» --url devnet
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">Requesting airdrop of <span class="m">2</span> SOL
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Signature: 3KsFBCULmso5Lc7CAQdqF8rzsBXb3xaVrG3cup19n3P2paw3ryvovWQ9MsMB8GMiQkXJWyHXGrni63BsNrxVfHP2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">2</span> SOL
</span></span></code></pre></td></tr></table>
</div>
</div><p>Para obtener la información completa de nuestra cuenta:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana account «YOUR_ADDRESS»
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">Public Key: 4aDSG82CdgMwt81z7AwnLnDRZyp6MjvZMUVpT82HZRU9
</span></span><span class="line"><span class="cl">Balance: 4.956381584 SOL
</span></span><span class="line"><span class="cl">Owner: <span class="m">11111111111111111111111111111111</span>
</span></span><span class="line"><span class="cl">Executable: <span class="nb">false</span>
</span></span><span class="line"><span class="cl">Rent Epoch: <span class="m">277</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Para verificar el balance de nuestra criptocartera hacemos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana balance 4aDSG82CdgMwt81z7AwnLnDRZyp6MjvZMUVpT82HZRU9
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl"><span class="m">2</span> SOL
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hasta aquí hemos conseguido crear una criptocartera de papel y fondear con 2 Solanas, las criptomonedas que utilizaremos más adelante para probar nuestro código base. A continuación vamos a ver cómo podemos cambiar entre cada una de las redes de Solana (localhost, testnet, devnet y mainnet-beta).</p>
<h3 id="gestionando-las-redes-de-solana">Gestionando las redes de solana</h3>
<p>Para utilizar las redes  localhost, testnet, devnet o mainnet-beta, podemos hacer lo siguiente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># set to localhost </span>
</span></span><span class="line"><span class="cl">solana config <span class="nb">set</span> --url localhost
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># set to testnet </span>
</span></span><span class="line"><span class="cl">solana config <span class="nb">set</span> --url localhost
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># set config devnet</span>
</span></span><span class="line"><span class="cl">solana config <span class="nb">set</span> --url devnet
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># set config mainnet</span>
</span></span><span class="line"><span class="cl">solana config <span class="nb">set</span> --url mainnet
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output</span>
</span></span><span class="line"><span class="cl">Config File: /home/user/.config/solana/cli/config.yml
</span></span><span class="line"><span class="cl">RPC URL: https://api.devnet.solana.com 
</span></span><span class="line"><span class="cl">WebSocket URL: wss://api.devnet.solana.com/ <span class="o">(</span>computed<span class="o">)</span>
</span></span><span class="line"><span class="cl">Keypair Path: /home/user/.config/solana/devnet.json 
</span></span><span class="line"><span class="cl">Commitment: confirmed 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Es importante estar al tanto de qué red estás usando mientras construyes, pruebas y despliegas tus programas. Hay que asegurarnos de que nuestra criptocartera es la misma de la  red del entorno local. Por ejemplo, si vamos a desarrollar nuestra aplicación en la red de devnet,  entonces ejecutamos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># set config devnet</span>
</span></span><span class="line"><span class="cl">solana config <span class="nb">set</span> --url devnet
</span></span></code></pre></td></tr></table>
</div>
</div><p>Si en cambio, deseas trabajar con la red en localhost, primero deberás iniciar el nodo local de Solana para realizar la pruebas:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana-test-validator
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">#Output is something like this:</span>
</span></span><span class="line"><span class="cl">Ledger location: test-ledger
</span></span><span class="line"><span class="cl">Log: test-ledger/validator.log
</span></span><span class="line"><span class="cl">Identity: D2tKzcNv1iLwWpQpEhwSXvuPH5vQUXy8jwCYvGEUzgZv
</span></span><span class="line"><span class="cl">Genesis Hash: 3qied4BanGash7eNA46H3UwnP3VLa96gYnMtDgEdQK3T
</span></span><span class="line"><span class="cl">Version: 1.8.16
</span></span><span class="line"><span class="cl">Shred Version: <span class="m">38112</span>
</span></span><span class="line"><span class="cl">Gossip Address: 127.0.0.1:1024
</span></span><span class="line"><span class="cl">TPU Address: 127.0.0.1:1027
</span></span><span class="line"><span class="cl">JSON RPC URL: http://127.0.0.1:8899
</span></span><span class="line"><span class="cl">.....
</span></span></code></pre></td></tr></table>
</div>
</div><p>Y luego</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># set config devnet</span>
</span></span><span class="line"><span class="cl">solana config <span class="nb">set</span> --url localhost
</span></span></code></pre></td></tr></table>
</div>
</div><p>Además de obtener algo de criptomonedas para está red:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana airdrop <span class="m">2</span> 4aDSG82CdgMwt81z7AwnLnDRZyp6MjvZMUVpT82HZRU9 --url localhost
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">Requesting airdrop of <span class="m">1</span> SOL
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Signature: 3KsFBCULmso5Lc7CAQdqF8rzsBXb3xaVrG3cup19n3P2paw3ryvovWQ9MsMB8GMiQkXJWyHXGrni63BsNrxVfHP2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span> SOL
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ahora que ya tienes solanas en tu criptocartera, podemos continuar con la siguiente fase de nuestro proyecto.</p>
<h2 id="configuración-inicial-de-una-dapp-con-anchor">Configuración inicial de una dapp con Anchor</h2>
<p>Para iniciar, creamos un nuevo proyecto de Anchor y cambiamos al nuevo directorio:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor init mydapp --javascript
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> mydapp
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">yarn install v1.22.17
</span></span><span class="line"><span class="cl">warning package.json: No license field
</span></span><span class="line"><span class="cl">info No lockfile found.
</span></span><span class="line"><span class="cl">warning No license field
</span></span><span class="line"><span class="cl"><span class="o">[</span>1/4<span class="o">]</span> Resolving packages...
</span></span><span class="line"><span class="cl">warning @project-serum/anchor &gt; @solana/web3.js &gt; rpc-websockets &gt; circular-json@0.5.9: CircularJSON is in maintenance only, flatted is its successor.
</span></span><span class="line"><span class="cl"><span class="o">[</span>2/4<span class="o">]</span> Fetching packages...
</span></span><span class="line"><span class="cl"><span class="o">[</span>3/4<span class="o">]</span> Linking dependencies...
</span></span><span class="line"><span class="cl">warning <span class="s2">&#34; &gt; ts-mocha@8.0.0&#34;</span> has incorrect peer dependency <span class="s2">&#34;mocha@^3.X.X || ^4.X.X || ^5.X.X || ^6.X.X || ^7.X.X || ^8.X.X&#34;</span>.
</span></span><span class="line"><span class="cl"><span class="o">[</span>4/4<span class="o">]</span> Building fresh packages...
</span></span><span class="line"><span class="cl">success Saved lockfile.
</span></span><span class="line"><span class="cl">Done in 11.66s.
</span></span><span class="line"><span class="cl">mydapp initialized
</span></span></code></pre></td></tr></table>
</div>
</div><p>Si deseamos trabajar con Typescript escribimos solamente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor init mydapp
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> mydapp
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">yarn install v1.22.17
</span></span><span class="line"><span class="cl">warning package.json: No license field
</span></span><span class="line"><span class="cl">info No lockfile found.
</span></span><span class="line"><span class="cl">warning No license field
</span></span><span class="line"><span class="cl"><span class="o">[</span>1/4<span class="o">]</span> Resolving packages...
</span></span><span class="line"><span class="cl">warning @project-serum/anchor &gt; @solana/web3.js &gt; rpc-websockets &gt; circular-json@0.5.9: CircularJSON is in maintenance only, flatted is its successor.
</span></span><span class="line"><span class="cl"><span class="o">[</span>2/4<span class="o">]</span> Fetching packages...
</span></span><span class="line"><span class="cl"><span class="o">[</span>3/4<span class="o">]</span> Linking dependencies...
</span></span><span class="line"><span class="cl">warning <span class="s2">&#34; &gt; ts-mocha@8.0.0&#34;</span> has incorrect peer dependency <span class="s2">&#34;mocha@^3.X.X || ^4.X.X || ^5.X.X || ^6.X.X || ^7.X.X || ^8.X.X&#34;</span>.
</span></span><span class="line"><span class="cl"><span class="o">[</span>4/4<span class="o">]</span> Building fresh packages...
</span></span><span class="line"><span class="cl">success Saved lockfile.
</span></span><span class="line"><span class="cl">Done in 11.66s.
</span></span><span class="line"><span class="cl">mydapp initialized
</span></span></code></pre></td></tr></table>
</div>
</div><p>Como podemos comprobar, este comando crea la siguiente estructura de archivos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">tree -L <span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">├── Anchor.toml
</span></span><span class="line"><span class="cl">├── app
</span></span><span class="line"><span class="cl">├── Cargo.toml
</span></span><span class="line"><span class="cl">├── migrations
</span></span><span class="line"><span class="cl">├── node_modules
</span></span><span class="line"><span class="cl">├── package.json
</span></span><span class="line"><span class="cl">├── programs
</span></span><span class="line"><span class="cl">├── tests
</span></span><span class="line"><span class="cl">├── tsconfig.json
</span></span><span class="line"><span class="cl">└── yarn.lock
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">5</span> directories, <span class="m">5</span> files
</span></span></code></pre></td></tr></table>
</div>
</div><p>Como se puede apreciar hay cuatro directorios a resaltar:</p>
<p><strong>app</strong> - Este directorio se utilizará para alojar el frontend de la aplicación.</p>
<p><strong>programs</strong> - Aquí se alojan los programas codificados en Rust. Estos son los archivos que definen los programas sobre la blockchain de Solana.</p>
<p><strong>test</strong> - En este directorio de alojan las pruebas para cada unas de las funcionalidades de nuestra dapp.</p>
<p><strong>migrations</strong> - Contiene todos los scripts necesarios para el despliegue de la dapp.</p>
<p>Echemos un vistazo al programa que se creó para nosotros.</p>
<p>Anchor utiliza, y nos permite escribir, un eDSL (DSL embebido) que abstrae muchas de las operaciones de bajo nivel más complejas que normalmente tendrías que hacer si estuvieras usando Solana y Rust sin él, haciéndolo más accesible.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="n">anchor_lang</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">declare_id</span><span class="o">!</span><span class="p">(</span><span class="s">&#34;Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cp">#[program]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">mod</span> <span class="nn">mydapp</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">use</span><span class="w"> </span><span class="k">super</span>::<span class="o">*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">ctx</span>: <span class="nc">Context</span><span class="o">&lt;</span><span class="n">Initialize</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ProgramResult</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cp">#[derive(Accounts)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Initialize</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Este es probablemente el programa más básico que puedes escribir. Lo único que sucede aquí es que estamos definiendo una función llamada <code>initialize</code>, que cuando se invoca simplemente sale del programa con éxito. No hay ninguna manipulación de datos.</p>
<p>La estructura <code>Initialize</code> define el contexto como vacío de cualquier argumento. Aprenderemos más sobre el contexto de la función más adelante.</p>
<p>Para compilar este programa, podemos ejecutar el comando <code>anchor build</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor build
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">BPF SDK: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf
</span></span><span class="line"><span class="cl">cargo-build-bpf child: rustup toolchain list -v
</span></span><span class="line"><span class="cl">cargo-build-bpf child: cargo +bpf build --target bpfel-unknown-unknown --release
</span></span><span class="line"><span class="cl">   Compiling proc-macro2 v1.0.36
</span></span><span class="line"><span class="cl">   Compiling unicode-xid v0.2.2
</span></span><span class="line"><span class="cl">   Compiling syn v1.0.86
</span></span><span class="line"><span class="cl">   Compiling serde_derive v1.0.136
</span></span><span class="line"><span class="cl">   Compiling serde v1.0.136
</span></span><span class="line"><span class="cl">   Compiling version_check v0.9.4
</span></span><span class="line"><span class="cl">   Compiling typenum v1.15.0
</span></span><span class="line"><span class="cl">   Compiling serde_json v1.0.79
</span></span><span class="line"><span class="cl">   Compiling semver v1.0.6
</span></span><span class="line"><span class="cl">   Compiling anyhow v1.0.56
</span></span><span class="line"><span class="cl">   Compiling ryu v1.0.9
</span></span><span class="line"><span class="cl">   Compiling opaque-debug v0.3.0
</span></span><span class="line"><span class="cl">   Compiling cfg-if v1.0.0
</span></span><span class="line"><span class="cl">   Compiling itoa v1.0.1
</span></span><span class="line"><span class="cl">   Compiling yansi v0.5.0
</span></span><span class="line"><span class="cl">   Compiling cpufeatures v0.2.1
</span></span><span class="line"><span class="cl">   Compiling unicode-segmentation v1.9.0
</span></span><span class="line"><span class="cl">   Compiling bs58 v0.3.1
</span></span><span class="line"><span class="cl">   Compiling subtle v2.4.1
</span></span><span class="line"><span class="cl">   Compiling rustversion v1.0.6
</span></span><span class="line"><span class="cl">   Compiling feature-probe v0.1.1
</span></span><span class="line"><span class="cl">   Compiling memchr v2.4.1
</span></span><span class="line"><span class="cl">   Compiling once_cell v1.10.0
</span></span><span class="line"><span class="cl">   Compiling cc v1.0.73
</span></span><span class="line"><span class="cl">   Compiling log v0.4.14
</span></span><span class="line"><span class="cl">   Compiling autocfg v1.1.0
</span></span><span class="line"><span class="cl">   Compiling bs58 v0.4.0
</span></span><span class="line"><span class="cl">   Compiling arrayref v0.3.6
</span></span><span class="line"><span class="cl">   Compiling arrayvec v0.7.2
</span></span><span class="line"><span class="cl">   Compiling either v1.6.1
</span></span><span class="line"><span class="cl">   Compiling regex-syntax v0.6.25
</span></span><span class="line"><span class="cl">   Compiling keccak v0.1.0
</span></span><span class="line"><span class="cl">   Compiling constant_time_eq v0.1.5
</span></span><span class="line"><span class="cl">   Compiling lazy_static v1.4.0
</span></span><span class="line"><span class="cl">   Compiling base64 v0.13.0
</span></span><span class="line"><span class="cl">   Compiling generic-array v0.14.5
</span></span><span class="line"><span class="cl">   Compiling proc-macro2-diagnostics v0.9.1
</span></span><span class="line"><span class="cl">   Compiling ahash v0.7.6
</span></span><span class="line"><span class="cl">   Compiling heck v0.3.3
</span></span><span class="line"><span class="cl">   Compiling bv v0.11.1
</span></span><span class="line"><span class="cl">   Compiling num-traits v0.2.14
</span></span><span class="line"><span class="cl">   Compiling itertools v0.10.3
</span></span><span class="line"><span class="cl">   Compiling blake3 v1.3.1
</span></span><span class="line"><span class="cl">   Compiling rustc_version v0.4.0
</span></span><span class="line"><span class="cl">   Compiling quote v1.0.15
</span></span><span class="line"><span class="cl">   Compiling aho-corasick v0.7.18
</span></span><span class="line"><span class="cl">   Compiling hashbrown v0.11.2
</span></span><span class="line"><span class="cl">   Compiling solana-frozen-abi-macro v1.10.0
</span></span><span class="line"><span class="cl">   Compiling solana-frozen-abi v1.10.0
</span></span><span class="line"><span class="cl">   Compiling solana-program v1.10.0
</span></span><span class="line"><span class="cl">   Compiling regex v1.5.5
</span></span><span class="line"><span class="cl">   Compiling borsh-schema-derive-internal v0.9.3
</span></span><span class="line"><span class="cl">   Compiling borsh-derive-internal v0.9.3
</span></span><span class="line"><span class="cl">   Compiling thiserror-impl v1.0.30
</span></span><span class="line"><span class="cl">   Compiling bytemuck_derive v1.0.1
</span></span><span class="line"><span class="cl">   Compiling solana-sdk-macro v1.10.0
</span></span><span class="line"><span class="cl">   Compiling num-derive v0.3.3
</span></span><span class="line"><span class="cl">   Compiling bytemuck v1.8.0
</span></span><span class="line"><span class="cl">   Compiling thiserror v1.0.30
</span></span><span class="line"><span class="cl">   Compiling bincode v1.3.3
</span></span><span class="line"><span class="cl">   Compiling serde_bytes v0.11.5
</span></span><span class="line"><span class="cl">   Compiling toml v0.5.8
</span></span><span class="line"><span class="cl">   Compiling block-buffer v0.10.2
</span></span><span class="line"><span class="cl">   Compiling crypto-common v0.1.3
</span></span><span class="line"><span class="cl">   Compiling block-buffer v0.9.0
</span></span><span class="line"><span class="cl">   Compiling digest v0.9.0
</span></span><span class="line"><span class="cl">   Compiling digest v0.10.3
</span></span><span class="line"><span class="cl">   Compiling sha2 v0.9.9
</span></span><span class="line"><span class="cl">   Compiling sha2 v0.10.2
</span></span><span class="line"><span class="cl">   Compiling sha3 v0.10.1
</span></span><span class="line"><span class="cl">   Compiling proc-macro-crate v0.1.5
</span></span><span class="line"><span class="cl">   Compiling anchor-syn v0.21.0
</span></span><span class="line"><span class="cl">   Compiling borsh-derive v0.9.3
</span></span><span class="line"><span class="cl">   Compiling borsh v0.9.3
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-access-control v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-interface v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-event v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-state v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-constant v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-account v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-error v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-derive-accounts v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-attribute-program v0.21.0
</span></span><span class="line"><span class="cl">   Compiling anchor-lang v0.21.0
</span></span><span class="line"><span class="cl">   Compiling mydapp v0.1.0 <span class="o">(</span>/home/alejandro/Documentos/Education/Blog/mydapp/programs/mydapp<span class="o">)</span>
</span></span><span class="line"><span class="cl">warning: unused variable: <span class="sb">`</span>ctx<span class="sb">`</span>
</span></span><span class="line"><span class="cl"> --&gt; programs/mydapp/src/lib.rs:8:23
</span></span><span class="line"><span class="cl">  <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="m">8</span> <span class="p">|</span>     pub fn initialize<span class="o">(</span>ctx: Context&lt;Initialize&gt;<span class="o">)</span> -&gt; ProgramResult <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">|</span>                       ^^^ help: <span class="k">if</span> this is intentional, prefix it with an underscore: <span class="sb">`</span>_ctx<span class="sb">`</span>
</span></span><span class="line"><span class="cl">  <span class="p">|</span>
</span></span><span class="line"><span class="cl">  <span class="o">=</span> note: <span class="sb">`</span><span class="c1">#[warn(unused_variables)]` on by default</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">warning: <span class="sb">`</span>mydapp<span class="sb">`</span> <span class="o">(</span>lib<span class="o">)</span> generated <span class="m">1</span> warning
</span></span><span class="line"><span class="cl">    Finished release <span class="o">[</span>optimized<span class="o">]</span> target<span class="o">(</span>s<span class="o">)</span> in 1m 30s
</span></span><span class="line"><span class="cl">cargo-build-bpf child: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf/scripts/strip.sh /home/alejandro/Documentos/Education/Blog/mydapp/target/bpfel-unknown-unknown/release/mydapp.so /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp.so
</span></span><span class="line"><span class="cl">cargo-build-bpf child: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf/dependencies/bpf-tools/llvm/bin/llvm-readelf --dyn-symbols /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp.so
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">To deploy this program:
</span></span><span class="line"><span class="cl">  $ solana program deploy /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp.so
</span></span><span class="line"><span class="cl">The program address will default to this keypair <span class="o">(</span>override with --program-id<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp-keypair.json
</span></span></code></pre></td></tr></table>
</div>
</div><p>Una vez que la ejecución se ha completado, deberíamos ver una nueva carpeta llamada <em>target</em>.</p>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>Advertencia<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Si el anterior paso no compiló correctamente, podemos revisar la versión de Anchor con:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor --version
</span></span></code></pre></td></tr></table>
</div>
</div><p>Si estamos usando la version Anchor 0.22.0 debemos actualizar el archivo como se muestra a continuación:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="n">anchor_lang</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">declare_id</span><span class="o">!</span><span class="p">(</span><span class="s">&#34;Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cp">#[program]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">mod</span> <span class="nn">mydapp</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">use</span><span class="w"> </span><span class="k">super</span>::<span class="o">*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">ctx</span>: <span class="nc">Context</span><span class="o">&lt;</span><span class="n">Initialize</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cp">#[derive(Accounts)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Initialize</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<p>Uno de los artefactos creados es un IDL ubicado en target/idl/mysolanaapp.json. Los IDLs son muy similares a los ABIs en Solidity (o una definición de consulta en GraphQL), y los usaremos de manera similar en nuestro código base de JavaScript para comunicarnos con nuestro programa Solana vía RPC.</p>
<p>También podemos probar nuestro programa. Si abrimos tests/mysolanaapp.js, veremos que hay un test escrito en JavaScript que nos permite probar el programa.</p>
<p>El test debería tener el siguiente aspecto en javascript:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">anchor</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@project-serum/anchor&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;mydapp&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Configure the client to use the local cluster.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">anchor</span><span class="p">.</span><span class="nx">setProvider</span><span class="p">(</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">Provider</span><span class="p">.</span><span class="nx">env</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;Is initialized!&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Add your test here.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">anchor</span><span class="p">.</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">Mydapp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">tx</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Your transaction signature&#34;</span><span class="p">,</span> <span class="nx">tx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Para el caso de Typescript:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">anchor</span> <span class="kr">from</span> <span class="s1">&#39;@project-serum/anchor&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Program</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@project-serum/anchor&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Mydapp</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../target/types/mydapp&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;mydapp&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Configure the client to use the local cluster.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">anchor</span><span class="p">.</span><span class="nx">setProvider</span><span class="p">(</span><span class="nx">anchor</span><span class="p">.</span><span class="nx">Provider</span><span class="p">.</span><span class="nx">env</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">anchor</span><span class="p">.</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">Mydapp</span> <span class="kr">as</span> <span class="nx">Program</span><span class="p">&lt;</span><span class="nt">Mydapp</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;Is initialized!&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Add your test here.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">tx</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({});</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Your transaction signature&#34;</span><span class="p">,</span> <span class="nx">tx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hay un par de cosas que debemos aprender de esta prueba que son importantes y que usaremos en el futuro, tanto en nuestras pruebas como en los clientes frontales de JavaScript.</p>
<p>Para llamar a un programa de Solana usando Anchor, típicamente necesitamos dos cosas principales:</p>
<ol>
<li>
<p><strong>Provider</strong> - El proveedor es una abstracción de una conexión a la red Solana, que suele consistir en una conexión, una criptocartera y un solicitud. En la prueba, el framework de Anchor creará el proveedor por nosotros basándose en el entorno (<code>anchor.Provider.env()</code>), pero en el cliente tendremos que construir el proveedor nosotros mismos usando la criptocartera de Solana del usuario.</p>
</li>
<li>
<p><strong>Program</strong> -  El programa es una abstracción que combina el <code>Provider</code>, <code>idl</code>, y el <code>programID</code> (que se genera cuando se construye el programa) y nos permite llamar a métodos RPC para interactuar con nuestro programa.</p>
</li>
</ol>
<p>Una vez más, como con el proveedor, Anchor ofrece una forma conveniente de acceder al programa, pero cuando se construye el front-end tendremos que construir este proveedor nosotros mismos.</p>
<p>Una vez que tenemos estas dos cosas, podemos empezar a llamar a las funciones en nuestro programa. Por ejemplo, en nuestro programa tenemos una función de <code>initialize</code>. En nuestra prueba, verás que podemos invocar esa función directamente usando <code>program.rpc.functionName</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">tx</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Este es un patrón muy común que usarás mucho cuando trabajes con Anchor, y una vez que entiendas cómo funciona, veremos  que realmente es muy fácil conectarse e interactuar con un programa de Solana.</p>
<p>Ahora podemos probar el programa ejecutando el script de prueba:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor <span class="nb">test</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">BPF SDK: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf
</span></span><span class="line"><span class="cl">cargo-build-bpf child: rustup toolchain list -v
</span></span><span class="line"><span class="cl">cargo-build-bpf child: cargo +bpf build --target bpfel-unknown-unknown --release
</span></span><span class="line"><span class="cl">warning: unused variable: <span class="sb">`</span>ctx<span class="sb">`</span>
</span></span><span class="line"><span class="cl"> --&gt; programs/mydapp/src/lib.rs:8:23
</span></span><span class="line"><span class="cl">  <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="m">8</span> <span class="p">|</span>     pub fn initialize<span class="o">(</span>ctx: Context&lt;Initialize&gt;<span class="o">)</span> -&gt; ProgramResult <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">|</span>                       ^^^ help: <span class="k">if</span> this is intentional, prefix it with an underscore: <span class="sb">`</span>_ctx<span class="sb">`</span>
</span></span><span class="line"><span class="cl">  <span class="p">|</span>
</span></span><span class="line"><span class="cl">  <span class="o">=</span> note: <span class="sb">`</span><span class="c1">#[warn(unused_variables)]` on by default</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">warning: <span class="sb">`</span>mydapp<span class="sb">`</span> <span class="o">(</span>lib<span class="o">)</span> generated <span class="m">1</span> warning
</span></span><span class="line"><span class="cl">    Finished release <span class="o">[</span>optimized<span class="o">]</span> target<span class="o">(</span>s<span class="o">)</span> in 0.21s
</span></span><span class="line"><span class="cl">cargo-build-bpf child: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf/dependencies/bpf-tools/llvm/bin/llvm-readelf --dyn-symbols /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp.so
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">To deploy this program:
</span></span><span class="line"><span class="cl">  $ solana program deploy /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp.so
</span></span><span class="line"><span class="cl">The program address will default to this keypair <span class="o">(</span>override with --program-id<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp-keypair.json
</span></span><span class="line"><span class="cl">yarn run v1.22.17
</span></span><span class="line"><span class="cl">warning package.json: No license field
</span></span><span class="line"><span class="cl">$ /home/alejandro/Documentos/Education/Blog/mydapp/node_modules/.bin/ts-mocha -p ./tsconfig.json -t <span class="m">1000000</span> <span class="s1">&#39;tests/**/*.ts&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  mydapp
</span></span><span class="line"><span class="cl">Your transaction signature oEboPaKA1Y6t8UT3CVpvgcPquoy7fizKedyg7Hr8PF6vD2EH3GmoCCqczEVLwH9HzvGxsJ7Uc2uuL3qhvgJx5Ag
</span></span><span class="line"><span class="cl">    ✔ Is initialized! <span class="o">(</span>370ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="m">1</span> passing <span class="o">(</span>376ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Done in 6.31s.
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="hello-world">Hello World</h2>
<p>Ya que nuestro proyecto está configurado, vamos a hacer algo un poco más interesante, como desarrolladores full stack, la mayoría de las veces nos preguntamos cómo hacer operaciones del tipo CRUD, así que eso es lo que veremos a continuación, obviamente, no implementaremos la operación de borrado como una transacción.</p>
<p>El programa que crearemos nos permitirá crear un contador que se incremente cada vez que lo llamemos desde una aplicación cliente.</p>
<p>Lo primero que debemos hacer es abrir <code>programs/mysolanaapp/src/lib.rs</code> y actualizarlo con el siguiente código:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="n">anchor_lang</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">declare_id</span><span class="o">!</span><span class="p">(</span><span class="s">&#34;Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cp">#[program]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">mod</span> <span class="nn">mydapp</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">use</span><span class="w"> </span><span class="k">super</span>::<span class="o">*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">create</span><span class="p">(</span><span class="n">ctx</span>: <span class="nc">Context</span><span class="o">&lt;</span><span class="n">Create</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ProgramResult</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">base_account</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">accounts</span><span class="p">.</span><span class="n">base_account</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">base_account</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">increment</span><span class="p">(</span><span class="n">ctx</span>: <span class="nc">Context</span><span class="o">&lt;</span><span class="n">Increment</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ProgramResult</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">base_account</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">accounts</span><span class="p">.</span><span class="n">base_account</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">base_account</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Transaction instructions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#[derive(Accounts)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Create</span><span class="o">&lt;&#39;</span><span class="na">info</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">#[account(init, payer = user, space = 16 + 16)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">base_account</span>: <span class="nc">Account</span><span class="o">&lt;&#39;</span><span class="na">info</span><span class="p">,</span><span class="w"> </span><span class="n">BaseAccount</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">#[account(mut)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">user</span>: <span class="nc">Signer</span><span class="o">&lt;&#39;</span><span class="na">info</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">system_program</span>: <span class="nc">Program</span><span class="w"> </span><span class="o">&lt;&#39;</span><span class="na">info</span><span class="p">,</span><span class="w"> </span><span class="n">System</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Transaction instructions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#[derive(Accounts)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Increment</span><span class="o">&lt;&#39;</span><span class="na">info</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">#[account(mut)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">base_account</span>: <span class="nc">Account</span><span class="o">&lt;&#39;</span><span class="na">info</span><span class="p">,</span><span class="w"> </span><span class="n">BaseAccount</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// An account that goes inside a transaction instruction
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#[account]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">BaseAccount</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">count</span>: <span class="kt">u64</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Nota<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Recuerda que si estás usando Anchor 0.22.0 o superior debes remplazar <code>ProgramResult</code> por <code>Result&lt;()&gt;</code>.</div>
        </div>
    </div>
<p>En este programa tenemos dos funciones - <code>create</code> e <code>increment</code>. Estas dos funciones son los controladores de las  peticiones RPC que podremos llamar desde una aplicación cliente para interactuar con el programa.</p>
<p>El primer parámetro de un controlador RPC es la estructura <code>Context</code>, que describe el contexto que se pasará cuando se llame a la función y cómo manejarlo. En el caso de <code>Create</code>, se esperan tres parámetros: <code>base_account</code>, <code>user</code>, y <code>system_program</code>.</p>
<p>Los atributos #[account(&hellip;)] definen las restricciones e instrucciones que están relacionadas con la cuenta de origen donde se declara. Si alguna de estas restricciones no se mantienen, entonces la instrucción nunca se ejecutará.</p>
<p>Cualquier cliente que llame a este programa con <code>base_account</code> adecuada puede llamar a estos métodos RPC.</p>
<p>La forma en que Solana maneja los datos es muy diferente a cualquier cosa con la que se haya trabajado antes. No hay un estado persistente dentro del programa, todo se adjunta a lo que se conoce como cuentas. Una cuenta contiene esencialmente todo el estado de un programa. Debido a esto, todos los datos se pasan por referencia desde el exterior.</p>
<p>Tampoco hay operaciones de lectura. Esto se debe a que todo lo que necesitas hacer para leer el contenido de un programa es solicitar la cuenta, a partir de ahí somos capaces de ver todo el estado del programa. Para leer más sobre el funcionamiento de las cuentas, consulta este <a href="https://2501babe.github.io/posts/solana101.html#programs-and-accounts" target="_blank" rel="noopener noreffer">post</a>.</p>
<p>Para construir el programa:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor build
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">BPF SDK: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf
</span></span><span class="line"><span class="cl">cargo-build-bpf child: rustup toolchain list -v
</span></span><span class="line"><span class="cl">cargo-build-bpf child: cargo +bpf build --target bpfel-unknown-unknown --release
</span></span><span class="line"><span class="cl">   Compiling mydapp2 v0.1.0 <span class="o">(</span>/home/alejandro/Documentos/Education/Blog/mydapp2/programs/mydapp2<span class="o">)</span>
</span></span><span class="line"><span class="cl">    Finished release <span class="o">[</span>optimized<span class="o">]</span> target<span class="o">(</span>s<span class="o">)</span> in 1.07s
</span></span><span class="line"><span class="cl">cargo-build-bpf child: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf/scripts/strip.sh /home/alejandro/Documentos/Education/Blog/mydapp2/target/bpfel-unknown-unknown/release/mydapp2.so /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2.so
</span></span><span class="line"><span class="cl">cargo-build-bpf child: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf/dependencies/bpf-tools/llvm/bin/llvm-readelf --dyn-symbols /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2.so
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">To deploy this program:
</span></span><span class="line"><span class="cl">  $ solana program deploy /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2.so
</span></span><span class="line"><span class="cl">The program address will default to this keypair <span class="o">(</span>override with --program-id<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2-keypair.json
</span></span></code></pre></td></tr></table>
</div>
</div><p>A continuación, vamos a escribir un test que utilice este programa. Para ello, abrimos <code>tests/mysolanaapp.js</code> y actualízamos con el siguiente código:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;assert&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">anchor</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@project-serum/anchor&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SystemProgram</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">anchor</span><span class="p">.</span><span class="nx">web3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">describe</span><span class="p">(</span><span class="s2">&#34;mydapp&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* create and set a Provider */</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="nx">anchor</span><span class="p">.</span><span class="nx">Provider</span><span class="p">.</span><span class="nx">env</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">anchor</span><span class="p">.</span><span class="nx">setProvider</span><span class="p">(</span><span class="nx">provider</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">anchor</span><span class="p">.</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">Mydapp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">it</span><span class="p">(</span><span class="s2">&#34;Creates a counter)&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* Call the create function via RPC */</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">baseAccount</span> <span class="o">=</span> <span class="nx">anchor</span><span class="p">.</span><span class="nx">web3</span><span class="p">.</span><span class="nx">Keypair</span><span class="p">.</span><span class="nx">generate</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">accounts</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">baseAccount</span><span class="o">:</span> <span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">user</span><span class="o">:</span> <span class="nx">provider</span><span class="p">.</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">systemProgram</span><span class="o">:</span> <span class="nx">SystemProgram</span><span class="p">.</span><span class="nx">programId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">signers</span><span class="o">:</span> <span class="p">[</span><span class="nx">baseAccount</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* Fetch the account and check the value of count */</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">account</span><span class="p">.</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Count 0: &#39;</span><span class="p">,</span> <span class="nx">account</span><span class="p">.</span><span class="nx">count</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="nx">account</span><span class="p">.</span><span class="nx">count</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_baseAccount</span> <span class="o">=</span> <span class="nx">baseAccount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">it</span><span class="p">(</span><span class="s2">&#34;Increments the counter&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">baseAccount</span> <span class="o">=</span> <span class="nx">_baseAccount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">increment</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">accounts</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">baseAccount</span><span class="o">:</span> <span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">account</span><span class="p">.</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Count 1: &#39;</span><span class="p">,</span> <span class="nx">account</span><span class="p">.</span><span class="nx">count</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="nx">account</span><span class="p">.</span><span class="nx">count</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Antes de continuar probando y desplegando el programa, debemos obtener el ID del programa generado dinámicamente por la compilación. Necesitamos este ID para usarlo en el programa de Rust para reemplazar el ID del marcador de posición que establecimos cuando creamos el proyecto. Para obtener este ID, podemos ejecutar el siguiente comando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana address -k target/deploy/mydapp-keypair.json
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">3L2Pintorca7FYFPRpKrgWojyfCMP3btASnM4w3kpZbs
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ahora podemos actualizar los ID de los programas en <code>lib.rs</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="c1">// mysolanaapp/src/lib.rs
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">declare_id</span><span class="o">!</span><span class="p">(</span><span class="s">&#34;YOUR_PROGRAM_ID&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>y también en el archivo <code>Anchor.toml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="p">[</span><span class="nx">features</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">seeds</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">programs</span><span class="p">.</span><span class="nx">localnet</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">mydapp2</span> <span class="p">=</span> <span class="s2">&#34;3L2Pintorca7FYFPRpKrgWojyfCMP3btASnM4w3kpZbs&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Luego ejecutamos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor <span class="nb">test</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">BPF SDK: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf
</span></span><span class="line"><span class="cl">cargo-build-bpf child: rustup toolchain list -v
</span></span><span class="line"><span class="cl">cargo-build-bpf child: cargo +bpf build --target bpfel-unknown-unknown --release
</span></span><span class="line"><span class="cl">    Finished release <span class="o">[</span>optimized<span class="o">]</span> target<span class="o">(</span>s<span class="o">)</span> in 0.18s
</span></span><span class="line"><span class="cl">cargo-build-bpf child: /home/alejandro/.local/share/solana/install/releases/1.8.16/solana-release/bin/sdk/bpf/dependencies/bpf-tools/llvm/bin/llvm-readelf --dyn-symbols /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2.so
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">To deploy this program:
</span></span><span class="line"><span class="cl">  $ solana program deploy /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2.so
</span></span><span class="line"><span class="cl">The program address will default to this keypair <span class="o">(</span>override with --program-id<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  /home/alejandro/Documentos/Education/Blog/mydapp2/target/deploy/mydapp2-keypair.json
</span></span><span class="line"><span class="cl">yarn run v1.22.17
</span></span><span class="line"><span class="cl">warning package.json: No license field
</span></span><span class="line"><span class="cl">$ /home/alejandro/Documentos/Education/Blog/mydapp2/node_modules/.bin/mocha -t <span class="m">1000000</span> tests/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  mydapp2
</span></span><span class="line"><span class="cl">Count 0:  <span class="m">0</span>
</span></span><span class="line"><span class="cl">    ✔ Creates a counter<span class="o">)</span> <span class="o">(</span>238ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">Count 1:  <span class="m">1</span>
</span></span><span class="line"><span class="cl">    ✔ Increments the counter <span class="o">(</span>419ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="m">2</span> passing <span class="o">(</span>663ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Done in 6.15s.
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>Advertencia<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">En ocasiones la ejecución de las pruebas falla porque el nodo de pruebas está activo. Verifica que <code>solana-test-validator</code> no esté corriendo, si es así termina el proceso y vuelve a ejecutar las pruebas.</div>
        </div>
    </div>
<p>Una vez que la prueba se ejecuta sin problemas, podemos desplegar. Hay que asegurarnos de que <code>solana-test-validator</code> se está ejecutando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anchor deploy
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Output is something like this:</span>
</span></span><span class="line"><span class="cl">Deploying workspace: http://localhost:8899
</span></span><span class="line"><span class="cl">Upgrade authority: /home/alejandro/.config/solana/id.json
</span></span><span class="line"><span class="cl">Deploying program <span class="s2">&#34;mydapp&#34;</span>...
</span></span><span class="line"><span class="cl">Program path: /home/alejandro/Documentos/Education/Blog/mydapp/target/deploy/mydapp.so...
</span></span><span class="line"><span class="cl">Program Id: CdhMsArvZhsPzEt5LYc55TZeScg1RNGUfXExtayB6vUA
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Deploy success
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Nota<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Tambien se puede ver el registro del validador abriendo una ventana separada y ejecutando <code>solana logs</code>.</div>
        </div>
    </div>
<p>Ya estamos listos para construir el frontend.</p>
<h2 id="construyento-la-react-app">Construyento la React App</h2>
<p>En la raíz del proyecto Anchor, se crea una nueva react app para sobrescribir el directorio de la app existente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">create-react-app app
</span></span></code></pre></td></tr></table>
</div>
</div><p>El siguiente paso es instalar la dependencias que vamos a necesitar para Anchor y Solana Web3:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd app
</span></span><span class="line"><span class="cl">yarn add @project-serum/anchor @solana/web3.js
</span></span></code></pre></td></tr></table>
</div>
</div><p>También vamos a utilizar <a href="https://github.com/solana-labs/wallet-adapter" target="_blank" rel="noopener noreffer">Solana Wallet Adapter</a> para controlar las conexiones de las criptocarteras de los usuarios de solana. Para esto hacemos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yarn add @solana/wallet-adapter-react @solana/wallet-adapter-react-ui @solana/wallet-adapter-wallets @solana/wallet-adapter-base
</span></span></code></pre></td></tr></table>
</div>
</div><p>A continuación, en el directorio <code>src</code>, creamos un nuevo archivo llamado <code>idl.json</code>. Aquí, copiamos el IDL JSON que fue creado en la carpeta principal del proyecto, ubicado en  <code>target/idl/mydapp.json</code>.</p>
<p>Sería bueno si pudiéramos copiar este archivo idl automáticamente a nuestra carpeta src de la aplicación cliente, pero hasta ahora no he encontrado una manera de hacer esto de forma nativa. Por supuesto, puedes crear tu propio script que haga esto si lo deseas, o bien necesitas copiar y pegar sobre el IDL después de cada cambio en tu programa principal.</p>
<p>Si quieres un script como este, puedes hacerlo en sólo un par de líneas de código:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">//copyIdl.js
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">idl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./target/idl/mysolanaapp.json&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="s1">&#39;./app/src/idl.json&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">idl</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>A continuación, abrimos app/src/App.js y actualízamos con lo siguiente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;./App.css&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">PublicKey</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@solana/web3.js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Program</span><span class="p">,</span> <span class="nx">Provider</span><span class="p">,</span> <span class="nx">web3</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@project-serum/anchor&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">idl</span> <span class="nx">from</span> <span class="s1">&#39;./idl.json&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">PhantomWalletAdapter</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@solana/wallet-adapter-wallets&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useWallet</span><span class="p">,</span> <span class="nx">WalletProvider</span><span class="p">,</span> <span class="nx">ConnectionProvider</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@solana/wallet-adapter-react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">WalletModalProvider</span><span class="p">,</span> <span class="nx">WalletMultiButton</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@solana/wallet-adapter-react-ui&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@solana/wallet-adapter-react-ui/styles.css&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">wallets</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/* view list of available wallets at https://github.com/solana-labs/wallet-adapter#wallets */</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">PhantomWalletAdapter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">SystemProgram</span><span class="p">,</span> <span class="nx">Keypair</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">web3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="cm">/* create an account  */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">baseAccount</span> <span class="o">=</span> <span class="nx">Keypair</span><span class="p">.</span><span class="nx">generate</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">preflightCommitment</span><span class="o">:</span> <span class="s2">&#34;processed&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">programID</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PublicKey</span><span class="p">(</span><span class="nx">idl</span><span class="p">.</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">address</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">value</span><span class="p">,</span> <span class="nx">setValue</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="nx">useWallet</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="kd">function</span> <span class="nx">getProvider</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* create the provider and return it to the caller */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* network set to local network for now */</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="s2">&#34;http://127.0.0.1:8899&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">(</span><span class="nx">network</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">preflightCommitment</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Provider</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">connection</span><span class="p">,</span> <span class="nx">wallet</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">preflightCommitment</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">provider</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="kd">function</span> <span class="nx">createCounter</span><span class="p">()</span> <span class="p">{</span>    
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">getProvider</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* create the program interface combining the idl, program ID, and provider */</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">program</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Program</span><span class="p">(</span><span class="nx">idl</span><span class="p">,</span> <span class="nx">programID</span><span class="p">,</span> <span class="nx">provider</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="cm">/* interact with the program via rpc */</span>
</span></span><span class="line"><span class="cl">      <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">accounts</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">baseAccount</span><span class="o">:</span> <span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">user</span><span class="o">:</span> <span class="nx">provider</span><span class="p">.</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">systemProgram</span><span class="o">:</span> <span class="nx">SystemProgram</span><span class="p">.</span><span class="nx">programId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">signers</span><span class="o">:</span> <span class="p">[</span><span class="nx">baseAccount</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">account</span><span class="p">.</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;account: &#39;</span><span class="p">,</span> <span class="nx">account</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setValue</span><span class="p">(</span><span class="nx">account</span><span class="p">.</span><span class="nx">count</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Transaction error: &#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="kd">function</span> <span class="nx">increment</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">getProvider</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">program</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Program</span><span class="p">(</span><span class="nx">idl</span><span class="p">,</span> <span class="nx">programID</span><span class="p">,</span> <span class="nx">provider</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">increment</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">accounts</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">baseAccount</span><span class="o">:</span> <span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">account</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">program</span><span class="p">.</span><span class="nx">account</span><span class="p">.</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">baseAccount</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;account: &#39;</span><span class="p">,</span> <span class="nx">account</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setValue</span><span class="p">(</span><span class="nx">account</span><span class="p">.</span><span class="nx">count</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">wallet</span><span class="p">.</span><span class="nx">connected</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* If the user&#39;s wallet is not connected, display connect wallet button. */</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="nx">display</span><span class="o">:</span> <span class="s1">&#39;flex&#39;</span><span class="p">,</span> <span class="nx">justifyContent</span><span class="o">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="nx">marginTop</span><span class="o">:</span><span class="s1">&#39;100px&#39;</span> <span class="p">}}</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="nx">WalletMultiButton</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">!</span><span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">createCounter</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Create</span> <span class="nx">counter</span><span class="o">&lt;</span><span class="err">/button&gt;)</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">increment</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Increment</span> <span class="nx">counter</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">&gt;=</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span> <span class="o">:</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Please</span> <span class="nx">create</span> <span class="nx">the</span> <span class="nx">counter</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* wallet configuration as specified here: https://github.com/solana-labs/wallet-adapter#setup */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">AppWithProvider</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">ConnectionProvider</span> <span class="nx">endpoint</span><span class="o">=</span><span class="s2">&#34;http://127.0.0.1:8899&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">WalletProvider</span> <span class="nx">wallets</span><span class="o">=</span><span class="p">{</span><span class="nx">wallets</span><span class="p">}</span> <span class="nx">autoConnect</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">WalletModalProvider</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/WalletModalProvider&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/WalletProvider&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/ConnectionProvider&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">AppWithProvider</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Finalmente desde el directorio, iniciamos la aplicación de React:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yarn start
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>Advertencia<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Si estas haciendo uso de React.js versión 17.0.0 o superior, es posible que tengas problemas con webpack 5. Para resolver esto, te recomiendo hacer lo siguiente:</p>
<ol>
<li>
<p>Primero instalamos las siguientes dependencias:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yarn add --dev react-app-rewired process crypto-browserify stream-browserify assert stream-http https-browserify os-browserify url buffer
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Creamos el archivo <code>config-overrides.js</code> en la raiz del proyecto de React:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">override</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">fallback</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">fallback</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">fallback</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;crypto&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;crypto-browserify&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;stream&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;stream-browserify&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;assert&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;assert&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;http&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;stream-http&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;https-browserify&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;os&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;os-browserify&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;url&#34;</span><span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">fallback</span> <span class="o">=</span> <span class="nx">fallback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">plugins</span> <span class="o">=</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">plugins</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">concat</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">ProvidePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">            <span class="nx">process</span><span class="o">:</span> <span class="s1">&#39;process/browser&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">Buffer</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;buffer&#39;</span><span class="p">,</span> <span class="s1">&#39;Buffer&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Luego editamos el archivo package.json. En lugar de <code>react-scripts</code> remplazar esto por <code>react-app-rewired</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">/*</span> <span class="err">Before</span> <span class="err">*/</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;scripts&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts start&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts build&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts test&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;eject&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts eject&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">/*</span> <span class="err">After</span> <span class="err">*/</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;scripts &#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;react-app-rewired start&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;react-app-rewired build&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;react-app-rewired test&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;eject&#34;</span><span class="p">:</span> <span class="s2">&#34;react-scripts eject&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="err">,</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>Los polyfills de Nodejs que faltan deberían estar incluidos ahora y tu aplicación debería ser funcionar con web3.</p>
<p>Si queremos ocultar las advertencias creadas por la consola en <code>config-overrides.js</code> en el interior de la función <code>override</code>, agregamos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">config</span><span class="p">.</span><span class="nx">ignoreWarnings</span> <span class="o">=</span> <span class="p">[</span><span class="sr">/Failed to parse source map/</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Ver</span> <span class="nx">documentación</span> <span class="nx">de</span> <span class="p">[</span><span class="nx">web3</span><span class="p">.</span><span class="nx">js</span><span class="p">.](</span><span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/ChainSafe/web3.js)
</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="configurar-la-red-local-en-la-wallet">Configurar la red local en la Wallet</h2>
<p>Antes de poder interactuar con un programa en la red localhost, debemos cambiar nuestro criptocartera de Phantom a la red adecuada.</p>
<p>Para ello, abrimos nuestra criptocartera de Phantom y hacemos clic en el botón de configuración. A continuación, nos desplazmaos hacia abajo para cambiar la red:</p>
<p><figure><a class="lightgallery" href="/20220310solana/wallet.png" title="red" data-thumbnail="/20220310solana/wallet.png" data-sub-html="<h2>Figura 1. Cambiar la red</h2><p>red</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="wallet.png"
            data-srcset="/20220310solana/wallet.png, wallet.png 1.5x, /20220310solana/wallet.png 2x"
            data-sizes="auto"
            alt="/20220310solana/wallet.png" />
    </a><figcaption class="image-caption">Figura 1. Cambiar la red</figcaption>
    </figure></p>
<p>A continuación, elejimos Localhost:</p>
<p><figure><a class="lightgallery" href="/20220310solana/wallet2.png" title="Localhost" data-thumbnail="/20220310solana/wallet2.png" data-sub-html="<h2>Figura 2. Seleccionar la red</h2><p>Localhost</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="wallet2.png"
            data-srcset="/20220310solana/wallet2.png, wallet2.png 1.5x, /20220310solana/wallet2.png 2x"
            data-sizes="auto"
            alt="/20220310solana/wallet2.png" />
    </a><figcaption class="image-caption">Figura 2. Seleccionar la red</figcaption>
    </figure></p>
<p>Ahora tenemos que enviar algunas criptomonedas de prueba a esta cartera. En la parte superior de la interfaz de la criptocartera, hacemos clic en nuestra dirección para copiarla en el portapapeles.</p>
<p><figure><a class="lightgallery" href="/20220310solana/wallet3.png" title="Address" data-thumbnail="/20220310solana/wallet3.png" data-sub-html="<h2>Figura 3. Dirección del monedero</h2><p>Address</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="wallet3.png"
            data-srcset="/20220310solana/wallet3.png, wallet3.png 1.5x, /20220310solana/wallet3.png 2x"
            data-sizes="auto"
            alt="/20220310solana/wallet3.png" />
    </a><figcaption class="image-caption">Figura 3. Dirección del monedero</figcaption>
    </figure></p>
<p>A continuación, en una terminal ejecutamos el siguiente comando (asegurate que <code>solana-test-validator</code> esté corriendo):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana airdrop <span class="m">2</span> «YOUR_ADDRESS»
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ahora deberíamos tener 2 solanas en nuestra cartera. Con estemo podemos ejecutar y probar la aplicación. Cambiamos al directorio de la aplicación y ejecutamos el siguiente comando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yarn start
</span></span></code></pre></td></tr></table>
</div>
</div><p>Deberíamos poder conectarnos a nuestra criptocartera, crear un contador e incrementarlo.</p>
<p>Notaremos que cuando refrescamos, pierdemos el estado del programa. Esto es porque estamos generando dinámicamente la cuenta base cuando el programa se carga. Si quieres leer e interactuar con los datos del programa a través de varios clientes, tendrías que crear y almacenar el Keypair en algún lugar de tu proyecto.</p>
<h2 id="despliegue-en-la-devnet">Despliegue en la Devnet</h2>
<p>A partir de aquí, el despliegue en una red activa es bastante sencillo. Las principales cosas que tenemos que hacer son:</p>
<ol>
<li>Actualizar la CLI de Solana para utilizar devnet:
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">solana config <span class="nb">set</span> --url devnet
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>Actualizar la criptocartera para usar la <code>devnet</code>.</li>
<li>En el archivo <code>Anchor.toml</code> actualizar el cluster de <code>localnet</code> a <code>devnet</code>.</li>
<li>Compilar el programa nuevamente. Asegurate que el ID del programa en <code>Anchor.toml</code> se igual al ID actual del programa</li>
<li>En archivo <code>app/src/App.js</code>, también es necesario actualizar la red, para esto debemos remplazar la red de localhost: <code>http://127.0.0.1:8899</code> por la red de desarrollo: <code>devnet</code>.
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="cm">/* Before */</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">ConnectionProvider</span> <span class="nx">endpoint</span><span class="o">=</span><span class="s2">&#34;http://127.0.0.1:8899&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* After */</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">...,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">clusterApiUrl</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@solana/web3.js&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">clusterApiUrl</span><span class="p">(</span><span class="s1">&#39;devnet&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">ConnectionProvider</span> <span class="nx">endpoint</span><span class="o">=</span><span class="p">{</span><span class="nx">network</span><span class="p">}</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>A partir de aquí, deberías poder desplegar y probar como hemos hecho en los pasos anteriores.</p>
<h2 id="el-siguiente-paso-para-no-parar-de-aprender">El siguiente paso para no parar de aprender</h2>
<p>Te sugiero continuar aprendiendo sobre NFTs y el uso de la API de Solana. Para ello, puedes visitar la siguiente página: <a href="https://alejandrosanchezyali.vercel.app/20220323solananftandipfs/" target="_blank" rel="noopener noreffer">¿Cómo crear una colección de NFTs en Solana con IPFS?</a>. Finalmente, esperamos que esta guía te sea de ayuda para que puedas desarrollar tus aplicaciones de forma sencilla. ¡Nos vemos pronto!</p>
<h2 id="asesorías">Asesorías</h2>
<p>Puedes encontrarme en <a href="https://www.classgap.com/es-co/tutor/alejandro-sanchez-yali" target="_blank" rel="noopener noreffer">Classgap</a>, allí puedes puedes consultar mis horarios de asesorías y agendar una.</p>
<h2 id="patrocinio">Patrocinio</h2>
<p>₿itcoin: <a href="https://www.exodus.com/" target="_blank" rel="noopener noreffer">bc1qrcecrz47ywrcnyuqknzgzzz2t3lwawyjnl4t7f</a></p>
<p>Solana: <a href="https://phantom.app/" target="_blank" rel="noopener noreffer">Ft8A8t3UyGZHjWNvtgruADnUgrij3uaFe7pLj9QNG44N</a></p>
<p>Ethereum: <a href="https://metamask.io/" target="_blank" rel="noopener noreffer">0x886ce8Cc54cd0964E6939c5290242b1135D10C7f</a></p>
<p>Paypal: <a href="https://paypal.me/asanchezyali?country.x=CO&amp;locale.x=es_XC" target="_blank" rel="noopener noreffer">@asanchezyali</a></p>
<h2 id="imágenes">Imágenes</h2>
<ul>
<li>
<p><a href="https://unsplash.com/" target="_blank" rel="noopener noreffer">Unplash</a> - <a href="https://unsplash.com/photos/_rZnChsIFuQ" target="_blank" rel="noopener noreffer">3D illustration of blocks in a blockchain</a></p>
<p>WhatsApp: +917559305753</p>
<p>Email: <a href="mailto:shubhamdhage000@gmail.com" rel="">shubhamdhage000@gmail.com</a></p>
</li>
</ul>
<h2 id="referencias">Referencias</h2>
<ol>
<li><a href="https://docs.metaplex.com/" target="_blank" rel="noopener noreffer">Metaplex Docs</a></li>
<li><a href="https://github.com/ChainSafe/web3.js" target="_blank" rel="noopener noreffer">Web3.js</a></li>
<li><a href="https://metaboss.rs/update.html" target="_blank" rel="noopener noreffer">Metaboss</a></li>
</ol>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 2022-07-02&nbsp;<a class="git-hash" href="https://github.com/asanchezyali/blog/commit/bc85082241a166a0951a140e64b9012249a07f56" target="_blank" title="commit by asanchezyali(alejandro.sanchezy@udea.edu.co) bc85082241a166a0951a140e64b9012249a07f56: rebuilding site sáb 02 jul 2022 21:13:52 -05">
                                    <i class="fas fa-hashtag fa-fw"></i>bc85082</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/20220310solana/index.md" target="_blank">Leer Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://alejandrosanchezyali.vercel.app/20220310solana/" data-title="Programando Dapps en Solana" data-via="asanchezyali" data-hashtags="Sistemas distribuidos"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://alejandrosanchezyali.vercel.app/20220310solana/" data-hashtag="Sistemas distribuidos"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://alejandrosanchezyali.vercel.app/20220310solana/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://alejandrosanchezyali.vercel.app/20220310solana/" data-title="Programando Dapps en Solana" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Hacker News" data-sharer="hackernews" data-url="https://alejandrosanchezyali.vercel.app/20220310solana/" data-title="Programando Dapps en Solana"><i class="fab fa-hacker-news fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/sistemas-distribuidos/">Sistemas distribuidos</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/20210712machinelearning/" class="prev" rel="prev" title="¿Aprendiendo de los datos?"><i class="fas fa-angle-left fa-fw"></i>¿Aprendiendo de los datos?</a>
            <a href="/20220323solananftandipfs/" class="next" rel="next" title="¿Cómo crear una colección de NFTs en Solana con IPFS?">¿Cómo crear una colección de NFTs en Solana con IPFS?<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Alejandro Sánchez Yalí</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/object-fit-images@3.2.4/dist/ofi.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":10},"comment":{},"cookieconsent":{"content":{"dismiss":"De acuerdo","link":"Aprende más","message":"Este sitio web utiliza Cookies para mejorar su experiencia."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No se encontraron resultados","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
